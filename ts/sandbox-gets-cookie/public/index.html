<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iframe Cookie æ¤œè¨¼ - è¦ªãƒšãƒ¼ã‚¸</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        h1 {
            color: #333;
            border-bottom: 3px solid #4CAF50;
            padding-bottom: 10px;
        }
        h2 {
            color: #555;
            margin-top: 0;
        }
        button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
        }
        button:hover {
            background-color: #45a049;
        }
        button.clear {
            background-color: #f44336;
        }
        button.clear:hover {
            background-color: #da190b;
        }
        iframe {
            width: 100%;
            height: 400px;
            border: 2px solid #ddd;
            border-radius: 4px;
            margin-top: 10px;
        }
        .cookie-display {
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 4px;
            margin: 10px 0;
            border-left: 4px solid #4CAF50;
        }
        .cookie-item {
            font-family: monospace;
            margin: 5px 0;
            padding: 5px;
            background-color: #fff;
            border-radius: 3px;
        }
        .label {
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }
        .info {
            background-color: #e3f2fd;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            border-left: 4px solid #2196F3;
        }
    </style>
</head>
<body>
    <h1>ğŸª iframeå†…ã§ã®Cookieå–å¾—æ¤œè¨¼</h1>

    <div class="container">
        <h2>è¦ªãƒšãƒ¼ã‚¸ (Same-origin)</h2>
        <div class="info">
            <strong>ã“ã®ãƒšãƒ¼ã‚¸ã«ã¤ã„ã¦:</strong> Cookieè¨­å®šã¨è¡¨ç¤ºã‚’è¡Œã„ã¾ã™ã€‚
        </div>

        <div>
            <button onclick="setCookies()">Cookieã‚’è¨­å®š</button>
            <button onclick="showParentCookies()">è¦ªãƒšãƒ¼ã‚¸ã®Cookieã‚’è¡¨ç¤º</button>
            <button onclick="clearAllCookies()" class="clear">ã™ã¹ã¦ã®Cookieã‚’ã‚¯ãƒªã‚¢</button>
        </div>

        <div id="parentCookies" class="cookie-display" style="display:none;">
            <div class="label">è¦ªãƒšãƒ¼ã‚¸ã®Cookie:</div>
            <div id="parentCookieList"></div>
        </div>
    </div>

    <div class="container">
        <h2>Same-origin iframe (åŒã˜ãƒ‰ãƒ¡ã‚¤ãƒ³)</h2>
        <div class="info">
            <strong>æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œ:</strong> è¦ªãƒšãƒ¼ã‚¸ã¨åŒã˜ãƒ‰ãƒ¡ã‚¤ãƒ³ãªã®ã§ã€Cookieã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã¯ãšã§ã™ã€‚
        </div>
        <iframe id="sameOriginFrame" src="/iframe.html"></iframe>
    </div>

    <div class="container">
        <h2>Sandboxå±æ€§ä»˜ãiframe</h2>
        <div class="info">
            <strong>æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œ:</strong> sandboxã‚¢ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã«ã‚ˆã‚Šåˆ¶é™ã•ã‚Œã¾ã™ã€‚<br>
            <code>allow-scripts</code>ã®ã¿: Cookieã‚¢ã‚¯ã‚»ã‚¹ãŒåˆ¶é™ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚
        </div>
        <iframe id="sandboxFrame" src="/iframe.html" sandbox="allow-scripts"></iframe>
    </div>

    <div class="container">
        <h2>Sandboxå±æ€§ä»˜ãiframe (same-originè¨±å¯)</h2>
        <div class="info">
            <strong>æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œ:</strong> <code>allow-same-origin</code>ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã§ã€Cookieã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã¯ãšã§ã™ã€‚
        </div>
        <iframe id="sandboxSameOriginFrame" src="/iframe.html" sandbox="allow-scripts allow-same-origin"></iframe>
    </div>

    <div class="container" style="border: 3px solid #4caf50;">
        <h2>ğŸŒ Cross-Origin iframe (ç•°ãªã‚‹ãƒ‰ãƒ¡ã‚¤ãƒ³/ãƒãƒ¼ãƒˆ)</h2>
        <div class="info" style="background-color: #e8f5e9; border-left: 4px solid #4caf50;">
            <strong>æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œ:</strong> ç•°ãªã‚‹ã‚ªãƒªã‚¸ãƒ³ï¼ˆlocalhost:9473ï¼‰ã‹ã‚‰ã®iframeã§ã™ã€‚<br>
            âŒ è¦ªãƒšãƒ¼ã‚¸ã®Cookieã«ã¯ã‚¢ã‚¯ã‚»ã‚¹<strong>ã§ãã¾ã›ã‚“</strong><br>
            âœ… è‡ªåˆ†è‡ªèº«ã®ã‚ªãƒªã‚¸ãƒ³ã®Cookieã«ã¯ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½<br>
            âœ… postMessage ã«ã‚ˆã‚‹é€šä¿¡ã¯å¯èƒ½<br>
            <br>
            <strong>âš ï¸ æ³¨æ„:</strong> ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å‹•ä½œã•ã›ã‚‹ã«ã¯ã€åˆ¥ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§<br>
            <code>node server-cross-origin.js</code> ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚
        </div>
        <iframe id="crossOriginFrame" src="http://localhost:9473/iframe-cross-origin.html" sandbox="allow-scripts allow-same-origin"></iframe>
    </div>

    <script src="/parent.js"></script>
</body>
</html>
